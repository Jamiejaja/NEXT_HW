if (self.CavalryLogger) { CavalryLogger.start_js(["PFC8LG2"]); }

__d("RegularPymkAddFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744254");c=b("FalcoLoggerInternal").create("regular_pymk_add",a);e.exports=c}),null);
__d("RegularPymkImpFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744255");c=b("FalcoLoggerInternal").create("regular_pymk_imp",a);e.exports=c}),null);
__d("RegularPymkProfileFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744256");c=b("FalcoLoggerInternal").create("regular_pymk_profile",a);e.exports=c}),null);
__d("RegularPymkXoutFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744257");c=b("FalcoLoggerInternal").create("regular_pymk_xout",a);e.exports=c}),null);
__d("XPymkFunnelLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pymk/funnel_logging/",{event_ts:{type:"Int",required:!0},query_id:{type:"Int"},candidate_id:{type:"Int"},signature:{type:"Int"},loc:{type:"String",required:!0},ref:{type:"String"},action:{type:"Enum",required:!0,enumType:1}})}),null);
__d("MPymkFunnelLogger",["Event","MRequest","RegularPymkAddFalcoEvent","RegularPymkImpFalcoEvent","RegularPymkProfileFalcoEvent","RegularPymkXoutFalcoEvent","Stratcom","XPymkFunnelLoggingController","gkx"],(function(a,b,c,d,e,f){f.listenToProfileClick=a;f.logImpression=c;f.logXOut=d;f.logClick=g;f.logAdd=e;f._logEvent=h;function a(a,c,d){var e=a.getAttribute("data-pymk-id"),f=a.getAttribute("data-pymk-loc"),h=a.getAttribute("data-signature"),i=[];i.push(b("Event").listen(d,"click",function(){e!=null&&g(e,h,f)}));i.push(b("Event").listen(c,"click",function(){e!=null&&g(e,h,f)}));b("Stratcom").listen("m:page:unload",null,function(){b("Stratcom").removeCurrentListener();while(i.length)i.pop().remove()})}function c(a,b,c){h(a,"impression",b,c)}function d(a,b,c){h(a,"hide",b,c)}function g(a,b,c){h(a,"click",b,c)}function e(a,b,c){h(a,"add",b,c)}function h(a,c,d,e){if(b("gkx")("1816085")){var f;switch(c){case"add":f=b("RegularPymkAddFalcoEvent");break;case"click":f=b("RegularPymkProfileFalcoEvent");break;case"hide":f=b("RegularPymkXoutFalcoEvent");break;case"impression":f=b("RegularPymkImpFalcoEvent");break}f!=null&&f.logCritical(i(a,e,d))}else{a=b("XPymkFunnelLoggingController").getURIBuilder().setInt("candidate_id",a).setInt("signature",d).setInt("event_ts",Math.floor(Date.now()/1e3)).setEnum("action",c).setString("loc",e).getURI();new(b("MRequest"))(a).send()}}function i(a,b,c){return function(){return{pymk_id:a,pymk_location:b,pymk_signature:c}}}}),null);
__d("XWriteCancelFriendRequestController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/a/friendrequest/cancel/",{subject_id:{type:"Int"},cancel_ref:{type:"String"},redirect_uri:{type:"String"},force_redirect:{type:"Bool",defaultValue:!1},friending_list_id:{type:"Int"},show_inline_errors:{type:"Bool",defaultValue:!1},ajax_id:{type:"String"},friending_location:{type:"String"},link_to_profile:{type:"Bool",defaultValue:!0}})}),null);
__d("XWriteRemoveFriendController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/a/friends/remove/",{subject_id:{type:"Int"},unfriend_ref:{type:"String"}})}),null);
__d("MAddFriend",["csx","cx","DOM","MAnimation","MFriendingActionError","MFriendingState","MLegacyDataStore","MPageCache","MPageControllerPath","MPymkFunnelLogger","MRequest","MRequestTypes","MURI","Parent","Stratcom","XWriteCancelFriendRequestController","XWriteRemoveFriendController","gkx"],(function(a,b,c,d,e,f,g,h){f.main=a;var i="m-add-friend",j="m-cancel-request",k="m-unfriend-request",l="m-unfollow-request",m="m-follow-request",n="check",o="friends",p="/a/mobile/friends/add_friend.php",q="/a/subscriptions/remove",r="/a/subscriptions/add",s=86,t=224;function u(a){a=a.querySelector(".touched_hide");a&&b("MAnimation").animate(a,"_4-ic",500)}function v(){var a=b("MPageControllerPath").getRequestPath();b("MPageCache").removeCachedPage(a);b("MPageCache").clearCachedIUIResponses(a)}function w(a){var c=a.getNode(i),d=a.getNode("m-add-friend-secondary");if(c==null||!(c instanceof HTMLAnchorElement)||d==null)return;var e=b("MLegacyDataStore").get(c),f=b("MLegacyDataStore").get(d);e.pymk_group_id||"pymk_suggestions_box";C(a);b("MLegacyDataStore").set(d,{one_click_adding:!0,one_click_cancel_event:null});v();var g={id:e.id,hf:e.hf,sc:e.sc,so:e.so,pl:e.pl,at:e.at,et:e.et,ed:e.ed,fref:e.fref};e.floc&&(g.floc=e.floc);e.el&&(g.el=e.el);var h=b("DOM").find(d,"*",n),j=b("DOM").find(d,"div","m-add-friend-flyout");e=new(b("MURI"))(p);var k=new(b("MURI"))(c.href).getQueryData()._ft_;k&&e.addQueryData({_ft_:k});k=new(b("MURI"))(c.href).getQueryData().__xts__;k&&e.addQueryData({__xts__:k});c=new(b("MRequest"))(e.toString()).setType(b("MRequestTypes").DEPENDENT);c.setData(g);var l=function(){b("DOM").show(h),b("MLegacyDataStore").get(d).bounce&&u(h),b("Stratcom").listen("friending_state_change",null,x.bind(a,g.id,b("MFriendingActionError").SEND_OUTGOING_REQUEST_ERROR)),b("Stratcom").invoke(b("MFriendingState").REQUEST_SENT,null,{event:a,userid:g.id})};c.listen("start",function(){b("MLegacyDataStore").set(d,{outgoing_request_pending:!0}),b("DOM").hide(j),l()});c.listen("postprocess",function(a){b("MLegacyDataStore").set(d,{outgoing_request_pending:!1}),f.one_click_adding&&(b("MLegacyDataStore").set(d,{one_click_adding:!1}),f.one_click_cancel_event&&z(f.one_click_cancel_event))});c.send();a.kill()}function x(a,c,d){d=d.getData();if(d.userid!=a)return;if(d.error!=c)return;a=this.getNode("m-add-friend-secondary");if(d.error===b("MFriendingActionError").SEND_OUTGOING_REQUEST_ERROR&&a!=null){b("MLegacyDataStore").set(a,{outgoing_request_pending:!1});var e=(c=b("DOM")).find(a,"*",n),f=c.find(a,"div","m-add-friend-flyout");c.show(f);c.hide(e);b("Stratcom").invoke(b("MFriendingActionError").SEND_OUTGOING_REQUEST_ERROR,null,{event:this})}else if(d.error===b("MFriendingActionError").CANCEL_OUTGOING_REQUEST_ERROR){f=(c=b("DOM")).find(a,"a","m-cancel-request");e=c.find(a,"div","m-add-friend-flyout");c.show(f);c.hide(e);b("Stratcom").invoke(b("MFriendingActionError").CANCEL_OUTGOING_REQUEST_ERROR,null,{event:this})}b("Stratcom").removeCurrentListener()}function y(a){var c=b("MLegacyDataStore").get(a.getNode(k)),d=c.flyoutEvent;v();a=d.getNode("undoable-action");a||(a=d.getNode("m-add-friend-secondary"));var e=b("DOM").scry(a,"*",o)[0],f=b("DOM").find(a,"div","m-add-friend-flyout");a=b("XWriteRemoveFriendController").getURIBuilder().getURI();a=new(b("MRequest"))(a);a.setData({friend_id:c.id,noReload:!0,unref:c.unfriend_ref});a.listen("start",function(){b("DOM").hide(e),c.is_deactivated||b("DOM").show(f)});a.listen("done",function(a){if(a==null?void 0:(a=a.payload)==null?void 0:a.success){b("Stratcom").invoke(b("MFriendingState").UNFRIENDED,null,{event:d,userid:c.id});return}c.is_deactivated||b("DOM").hide(f);b("DOM").show(e)});a.send();d.kill()}function z(a){var c=b("MLegacyDataStore").get(a.getNode(j)),d=a.getNode("undoable-action");d||(d=a.getNode("m-add-friend-secondary"));d||(d=c.parentNode);var e=b("DOM").scry(d,"*",n)[0],f=b("DOM").find(d,"*","load"),g=b("DOM").find(d,"div","m-add-friend-flyout");d=a.getNode("m-add-friend-secondary");var h=d?b("MLegacyDataStore").get(d):null;if(F&&h&&h.outgoing_request_pending)return;if(h&&h.one_click_adding){b("MLegacyDataStore").set(d,{one_click_cancel_event:a});b("DOM").hide(e);b("DOM").show(f);return}var i=function(){b("MLegacyDataStore").get(g).not_friendable||b("DOM").show(g),b("Stratcom").invoke(b("MFriendingState").REQUEST_CANCELED,null,{event:a,userid:c.id})};h=b("XWriteCancelFriendRequestController").getURIBuilder().getURI();d=new(b("MRequest"))(h);d.setData({subject_id:c.id,ref_param:c.ref_param,floc:c.floc});b("Stratcom").listen("friending_state_change",null,x.bind(a,c.id,b("MFriendingActionError").CANCEL_OUTGOING_REQUEST_ERROR));d.listen("start",function(){b("DOM").hide(e),b("DOM").show(f)});d.listen("finally",function(){b("DOM").hide(f);i();var c=a.getNode("story-wrap");c&&b("MLegacyDataStore").set(c,{sent:!1})});d.send();a.kill()}function A(a){var c=a.getNode(l);if(c==null)return;c=b("MLegacyDataStore").get(c);var d=new(b("MURI"))(q);d=new(b("MRequest"))(d);var e=a,f=null;try{var g;f=(g=c.flyoutEvent)==null?void 0:g.getNode("popup-action-trigger")}catch(a){f=null}if(f!=null){d.setData({subject_id:c.id,forceredirect:!1,location:s});d.send();b("MLegacyDataStore").set(f,{is_following:!1});a.kill();return}g=e.getNode("m-add-friend-flyout");var h=b("DOM").find(g,"a","m-follow-request"),i=b("DOM").find(g,"a","m-unfollow-request"),j=b("DOM").find(g,"*","load");d.setData({subject_id:c.id,forceredirect:!1,location:t});d.listen("start",function(){b("DOM").hide(i),b("DOM").show(j)});d.listen("finally",function(){b("DOM").hide(j),b("DOM").show(h)});d.send();e.kill()}function B(a){var c=a.getNode(m);if(c==null)return;c=b("MLegacyDataStore").get(c);var d=new(b("MURI"))(r);d=new(b("MRequest"))(d);var e=a,f=null;try{var g;f=(g=c.flyoutEvent)==null?void 0:g.getNode("popup-action-trigger")}catch(a){f=null}if(f!==null){d.setData({subject_id:c.id,forceredirect:!1,location:s});d.send();b("MLegacyDataStore").set(f,{is_following:!0});a.kill();return}g=e.getNode("m-add-friend-flyout");var h=b("DOM").find(g,"a","m-follow-request"),i=b("DOM").find(g,"a","m-unfollow-request"),j=b("DOM").find(g,"*","load");d.setData({subject_id:c.id,forceredirect:!1,location:t});d.listen("start",function(){b("DOM").hide(h),b("DOM").show(j)});d.listen("finally",function(){b("DOM").hide(j),b("DOM").show(i)});d.send();e.kill()}function C(a){a=a.getNode(i);if(!a)return;a=b("Parent").bySelector(a,"._5pxa");if(!a)return;var c=a.getAttribute("data-pymk-id"),d=a.getAttribute("data-pymk-loc");a=a.getAttribute("data-signature");c!=null&&Boolean(c)&&d!=null&&(d==="/find-friends/index.php"||d==="mobile_jewel")&&a!=null&&b("MPymkFunnelLogger").logAdd(c,a,d)}var D=!1,E=!1,F=!1;function a(a){a!=null&&a&&!E&&(E=!0,b("Stratcom").listen("click",l,A),b("Stratcom").listen("click",m,B));if(D)return;D=!0;F=b("gkx")("832605");b("Stratcom").listen("click",i,w);b("Stratcom").listen("click",j,z);b("Stratcom").listen("click",k,y)}}),null);