if (self.CavalryLogger) { CavalryLogger.start_js(["Ry7SoEr"]); }

__d("MQTTRequestStreamUtils",["BladeRunnerStreamHandler","BladeRunnerTypes","RequestStreamCommonRequestStreamCommonTypes"],(function(a,b,c,d,e,f){"use strict";f.convertToBRHandler=a;var g="Stream closed";f.TERMINATION_REASON_CLOSED=g;var h="Stream rejected";f.TERMINATION_REASON_REJECTED=h;function a(a){var c=function(c){switch(c){case b("BladeRunnerTypes").StreamStatus.ACCEPTED:a.onFlowStatus(b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted);break;case b("BladeRunnerTypes").StreamStatus.STARTED:a.onFlowStatus(b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started);break;case b("BladeRunnerTypes").StreamStatus.PAUSED:a.onFlowStatus(b("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped);break;case b("BladeRunnerTypes").StreamStatus.CLOSED:a.onTermination(g);break;case b("BladeRunnerTypes").StreamStatus.REJECTED:a.onTermination(h);break}};return new(b("BladeRunnerStreamHandler"))(function(b){return a.onData(b)},null,c,function(b){return a.onLog(b)},null)}}),null);
__d("RequestStreamTransport",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["WEB_BR_MQTT","WEB_RS_MQTT","WEB_RS_STARGATE"]);f.RequestStreamTransport=a}),null);
__d("DGWStreamCallbacks",[],(function(a,b,c,d,e,f){"use strict"}),null);
__d("DGWStreamGroupCallbacks",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored([]);f.DGWStreamGroupError=a}),null);
__d("GroupedStream",["DGWAckManager","DGWConstants","DGWLoggingContext","DGWStreamEvents","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d,e,f,g){this.$1=a,this.$3=c,this.$4=d,this.$5=e,this.$2=g,this.$6=f,this.$7=new(b("DGWAckManager").DGWAckManager)(this.$6),this.$9=new(b("DGWStreamEvents").DGWStreamEvents)(this.$6),this.$8=0}var c=a.prototype;c.send=function(a,c){var d,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:e=this.$8++%b("DGWConstants").MAX_ACK_ID;if(this.$10(a,!0,e)){g.next=3;break}return g.abrupt("return",!1);case 3:g.next=5;return b("regeneratorRuntime").awrap(this.$7.waitForAck(e,(d=c)!=null?d:b("DGWConstants").DEFAULT_ACK_TIMEOUT_MS));case 5:f=g.sent;return g.abrupt("return",f);case 7:case"end":return g.stop()}},null,this)};c.sendAndForget=function(a){return this.$10(a,!1)};c.close=function(){};c.__sendDrain=function(a){return!0};c.$10=function(a,c,d){c===void 0&&(c=!1);d===void 0&&(d=0);if(!this.$5.isOpen()){this.$6.logError(b("DGWLoggingContext").DGWLoggingComponent.STREAM_COMPONENT,"Failed to send data","StreamGroupTransport not open during send");return!1}a=this.$2.encodeData(a,c,d);if(a==null)return!1;this.$5.send(a);this.$9.dataSent(d,a.length,c);return!0};return a}();f.GroupedStream=a}),null);
__d("StreamGroupContext",[],(function(a,b,c,d,e,f){"use strict"}),null);
__d("StreamGroupWebSocketTransport",["DGWExponentialBackoff","DGWWebSocketTransport","Promise","err","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var c=a.prototype;c.send=function(a){this.$1.send(a)};c.isOpen=function(){return this.$1.readyState===WebSocket.OPEN};c.close=function(){return this.$1.close(4e3)};a.getTransport=function(c,d){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:e=function(){return a.$3(c.connectUrl,d)};f.prev=1;f.next=4;return b("regeneratorRuntime").awrap(b("DGWExponentialBackoff").callWithExponentialBackoff(e));case 4:return f.abrupt("return",f.sent);case 7:f.prev=7;f.t0=f["catch"](1);throw f.t0;case 10:case"end":return f.stop()}},null,this,[[1,7]])};a.$3=function(c,d){var e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:e=b("DGWWebSocketTransport").getWebSocketConnection(c);f=new a(e,d);h.next=4;return b("regeneratorRuntime").awrap(a.getTransportPromise(f));case 4:g=h.sent;return h.abrupt("return",g);case 6:case"end":return h.stop()}},null,this)};a.getTransportPromise=function(a){var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(new(b("Promise"))(function(c,d){var e=a.$1.onerror,f=a.$1.onopen;a.$1.onerror=function(){e(),d(b("err")("Transport could not be initialized"))};a.$1.onopen=function(){f(),c(a)}}));case 2:c=d.sent;return d.abrupt("return",c);case 4:case"end":return d.stop()}},null,this)};return a}();f.StreamGroupWebSocketTransport=a}),null);
__d("StreamGroup",["DGWConstants","DGWLoggingContext","DGWUtils","GroupedStream","Promise","StreamGroupWebSocketTransport","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d,e,f,g,h,i,j){this.$2=j;this.$1=j.getNewStreamGroupId();j=(j=h.overrideUrl)!=null?j:f;c=b("DGWUtils").DGWUtils.constructConnectUrl({appId:a,appVersion:c,authType:d,dgwVersion:e,fbId:g,headers:(f=h.streamGroupAppHeaders)!=null?f:{},loggingId:void 0,tier:(a=h.serviceTier)!=null?a:b("DGWConstants").DEFAULT_SERVICE_TIER,serviceId:h.serviceId,endpoint:j,regionHint:h.regionHint});this.$3={dgwVersion:e,connectUrl:c,fbId:g,serviceId:h.serviceId,streamGroupCallbacks:i};this.$4=h;this.$5={onDataReceived:function(a,b){},handleAckReceived:function(a){},receivedDrainSignal:function(a){},onGroupedStreamDataReceived:function(a,b,c){},onGroupedStreamAckReceived:function(a,b){},onGroupedStreamEndOfDataReceived:function(a){},onGroupedStreamEstablishStreamReceived:function(a,b){}};this.$6=new(b("DGWUtils").DGWCodec)(null,this.$5)}var c=a.prototype;c.establishStream=function(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.$2.containsStreamGroup(this.$1)===!1)){e.next=5;break}e.next=3;return b("regeneratorRuntime").awrap(b("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport(this.$3,this.$6));case 3:d=e.sent,this.$2.setStreamGroupAndTransport(this.$1,d);case 5:return e.abrupt("return",this.establishStreamWithTransport(a,c));case 6:case"end":return e.stop()}},null,this)};c.establishStreamWithTransport=function(a,c){var d=this;return new(b("Promise"))(function(e){return e(new(b("GroupedStream").GroupedStream)(1,c,a,d.$2.getStreamGroupTransport(d.$1),new(b("DGWLoggingContext").DGWLoggingContext)(d.$3.dgwVersion,a.loggingId,d.$3.serviceId,d.$3.fbId),d.$6))})};return a}();f.StreamGroup=a}),null);
__d("StreamGroupRegistry",["Random","err"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Map(),this.$2=new Set()}var c=a.prototype;c.setStreamGroupAndTransport=function(a,b){this.$1.set(a,b)};c.containsStreamGroup=function(a){return this.$1.has(a)};c.removeStreamGroupAndTransport=function(a){this.$1["delete"](a)};c.getStreamGroupTransport=function(a){a=this.$1.get(a);if(a==void 0)throw b("err")("No stream group transport");return a};c.getNewStreamGroupId=function(){var a=b("Random").uint32();while(this.$2.has(a))a=b("Random").uint32();this.$2.add(a);return a};return a}();f.StreamGroupRegistry=a}),null);