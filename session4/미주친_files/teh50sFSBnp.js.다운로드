if (self.CavalryLogger) { CavalryLogger.start_js(["y\/tblLz"]); }

__d("MAnimatedScroll",["MAnimator","MViewport","Vector","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";f.scrollToOffset=j;f.scrollToTop=a;f.scrollToNode=c;var g=null,h=500;function i(a){a&&b("clearTimeout")(a);return null}function j(a,c,d){g=i(g);c=c.duration===null||c.duration===void 0?h:c.duration;var e=b("MViewport").getScrollTop();if(e===a)return;var f=e;b("MAnimator").play(e,a,c,function(c){var d=b("MAnimator").easeInOutCubic((c-f)/(e-a));d=Math.round((c-f)*d+f);f=c;b("MViewport").scrollToY(d)});d&&(g=b("setTimeoutAcrossTransitions")(d,c))}function a(a,b){j(0,a,b)}function c(a,c,d,e){j(b("Vector").getPos(a).y-c,d,e)}}),null);
__d("MStoriesProductionInfo",[],(function(a,b,c,d,e,f){"use strict";a={_uploadStatus:null,_uri:null,_rotate:0,setUploadStatus:function(a){this._uploadStatus=a},getUploadStatus:function(){return this._uploadStatus},setChosenImage:function(a){var b=a.URI;a=a.rotate;this._uri=b;this._rotate=a},getChosenImage:function(){return{URI:this._uri,rotate:this._rotate}}};e.exports=a}),null);
__d("MStoriesUploadStatus",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({IDLE:0,UPLOADING:1,FAILED:2});e.exports=a}),null);
__d("MStoriesStratcomEvents",[],(function(a,b,c,d,e,f){"use strict";a="fb:stories:mobile:story:viewer:story:deleted";f.DELETE_BUCKET=a;b="fb:stories:mobile:story:viewer:delete:thread";f.DELETE_THREAD=b;c="fb:stories:mobile:story:viewer:story:muted";f.MUTE_BUCKET=c;d="m:stories:thread:media:pause";f.MEDIA_PAUSE=d;e="m:stories:thread:media:pause:with:cover";f.MEDIA_PAUSE_WITH_COVER=e;a="m:stories:thread:media:play";f.MEDIA_PLAY=a;b="fb:stories:mobile:story:viewer:nextBucket";f.NEXT_BUCKET=b;c="fb:stories:mobile:story:viewer:nextCard";f.NEXT_CARD=c;d="fb:stories:mobile:story:viewer:card:changed:by:viewer:sheet";f.CARD_CHANGED_BY_VIEWER_SHEET=d;e="fb:stories:mobile:story:viewer:prevBucket";f.PREV_BUCKET=e;a="fb:stories:mobile:story:viewer:click:story:in:viewer:sheet";f.CLICK_STORY_IN_VIEWER_SHEET=a;b="m:stories:card:modal:hide";f.THREAD_MODAL_HIDE=b;c="m:video:player:play";f.VIDEO_PLAY=c;d="m:video:player:playing";f.VIDEO_PLAYING=d;e="m-stories-viewer-sheet-hide";f.VIEWER_SHEET_HIDE=e;a="m-stories-viewer-sheet-hidden";f.VIEWER_SHEET_HIDDEN=a;b="m-stories-viewer-sheet-open";f.VIEWER_SHEET_OPEN=b;c="m-stories-viewer-sheet-image-changed-by-scrolling";f.VIEWER_SHEET_IMAGE_CHANGED_BY_SCROLLING=c;d="m-stories-viewer-sheet-native-template-changed-by-scrolling";f.VIEWER_SHEET_NATIVE_TEMPLATE_CHANGED_BY_SCROLLING=d;e="m:stories:production:preview-controls:hide";f.PRODUCTION_PREVIEW_CONTROLS_HIDE=e;a="m:stories:production:preview-controls:show";f.PRODUCTION_PREVIEW_CONTROLS_SHOW=a;b="m:stories:production:text-controls:hide";f.PRODUCTION_TEXT_CONTROLS_HIDE=b;c="m:stories:production:text-controls:show";f.PRODUCTION_TEXT_CONTROLS_SHOW=c;d="m:stories:production:text-overlay:remove";f.PRODUCTION_TEXT_OVERLAY_REMOVE=d;e="m:stories:production:text-overlay:focus";f.PRODUCTION_TEXT_OVERLAY_FOCUS=e;a="m:stories:swipe:left";f.SWIPE_LEFT=a;b="m:stories:swipe:right";f.SWIPE_RIGHT=b;c="m:stories:swipe:down";f.SWIPE_DOWN=c;d="m:stories:swipe:up";f.SWIPE_UP=d;e="fb:stories:mobile:story:viewer:swipe:reply";f.SWIPE_REPLY=e;a="m:stories:toast:showing";f.TOAST_SHOWING=a;b="m:stories:toast:hiding";f.TOAST_HIDING=b;c="m:stories:upload:failed";f.UPLOAD_FAILED=c;d="m:stories:upload:success";f.UPLOAD_SUCCESS=d;e="m:stories:overlay-interaction:pause";f.OVERLAY_INTERACTION_PAUSE=e;a="m:stories:overlay-interaction:play";f.OVERLAY_INTERACTION_PLAY=a;b="m:stories:set-bucket-ids-use-for-testing-only";f.SET_BUCKET_IDS_USE_FOR_TESTING_ONLY=b}),null);
__d("MStoriesUtils",["cx","fbt","DOM","MPageController","MStoriesStratcomEvents","MStoriesUIConstants","Stratcom","Style","UserAgent","gkx","goURI"],(function(a,b,c,d,e,f,g,h){"use strict";var i={UNSET:"UNSET",PUBLIC:"PUBLIC",FRIENDS_AND_CONNECTIONS:"FRIENDS_AND_CONNECTIONS",FRIENDS:"FRIENDS",CUSTOM:"CUSTOM"},j=[],k={displaysExifRotationCorrectly:function(){return b("UserAgent").isBrowser("Chrome >= 81")||b("UserAgent").isBrowser("Mobile Safari >= 13.1")||b("UserAgent").isBrowser("Safari >= 13.1")},getDocumentScale:function(){var a=window.visualViewport;return a?a.scale:document.body?document.body.clientWidth/window.innerWidth:1},listenForThreadTransition:function(a){var c,d;c=[(c=b("Stratcom")).listen("click","m-stories-next-button",a),c.listen("click","m-stories-prev-button",a),c.listen((d=b("MStoriesStratcomEvents")).CARD_CHANGED_BY_VIEWER_SHEET,null,a),c.listen(d.NEXT_CARD,null,a),c.listen(d.NEXT_BUCKET,null,a),c.listen(d.PREV_BUCKET,null,a)];return c},iOSVersion:function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return a==null?null:parseInt(a[1],10)}return null},goBackToHomepage:function(){if(j.length>0){b("MPageController").load(j.pop(),{expiration:b("MStoriesUIConstants").REFRESH_TIMEOUT_IN_MS});return}var a=document.getElementsByClassName("_129-")[0],c=k.iOSVersion();c=c&&c<10;!c&&(a||b("gkx")("709647"))?(b("DOM").show(a),b("MPageController").load("/",{expiration:b("MStoriesUIConstants").REFRESH_TIMEOUT_IN_MS})):b("goURI")("/")},getCropInfo:function(a,b,c,d,e){var f={sx:0,sy:0,sWidth:a,sHeight:b,dWidth:c,dHeight:d};if(!e){e=a/b;e=c/e;e<=d?f.dHeight=e:(f.sy=(e-d)/2*(b/e),f.sHeight=b-f.sy*2)}else{e=c/b*a;e<=d?f.dHeight=e:(f.sx=(e-d)/2*(a/d),f.sWidth=a-f.sx*2)}return f},getAudienceModeHeaderMapping:function(a){switch(a){case i.PUBLIC:return h._("\uc804\uccb4 \uacf5\uac1c");case i.FRIENDS_AND_CONNECTIONS:return h._("\uce5c\uad6c \ubc0f \uc5f0\uacb0\ub41c \uc5f0\ub77d\ucc98");case i.FRIENDS:return h._("\uce5c\uad6c\ub9cc");case i.CUSTOM:return h._("\uc9c1\uc811 \uc9c0\uc815");default:return h._("\uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4")}},touchMoveListener:function(a){a.touches.length===1&&k.getDocumentScale()===1&&a.preventDefault()},truncateParagraphToFitContainer:function(a){var c=a.textContent,d=!1;do{var e=b("Style").get(a,"max-height");b("Style").set(a,"max-height","unset");var f=a.clientHeight;b("Style").set(a,"maxHeight",e);e=a.clientHeight;if(f<=e){d=!0;break}c=c.slice(0,-1);a.textContent=c+"..."}while(!d)},setExitUri:function(a,b){b===void 0&&(b=!1);if(a==null)return;b?j.push(a):j=[a]},getInnerText:function(a){var b="",c=!0;for(var d=0;d<a.childNodes.length;d++){var e=a.childNodes[d];e.nodeType===Node.TEXT_NODE?(b+=e.textContent,c=!1):e.nodeName.toLowerCase()==="br"&&!c?(b+="\n",c=!0):e.nodeName.toLowerCase()!=="br"&&(c||(b+="\n"),b+=e.textContent,b+="\n",c=!0)}return b},isIOS:function(){if(!navigator.userAgent)return!1;return navigator.userAgent.match(/iPhone/)||navigator.userAgent.match(/iPod/)||navigator.userAgent.match(/iPad/)?!0:!1}};e.exports=k}),null);
__d("XMStoriesProductionPreviewController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stories/preview/",{session_key:{type:"String"}})}),null);
__d("MStoriesCreation",["fbt","Bootloader","MPageController","MStoriesProductionInfo","MStoriesUploadStatus","MStoriesUtils","Promise","UserAgent","WebFunnelLogger","XMStoriesProductionPreviewController","nullthrows","promiseDone","uuid"],(function(a,b,c,d,e,f,g){function h(a){return new(b("Promise"))(function(b){var c=new FileReader();c.onload=function(a){return b(a.target.result)};c.readAsDataURL(a)})}a=function(){function a(c){var d=this;this.$3="";this.$5=function(a){a=b("MStoriesProductionInfo").getUploadStatus();if(a===b("MStoriesUploadStatus").UPLOADING){b("Bootloader").loadModules(["MStoriesToast"],function(a){a.showDefaultToast(g._("\uc2a4\ud1a0\ub9ac \uc5c5\ub85c\ub4dc \uc911"))},"MStoriesCreation");return}d.$3=b("uuid")();new(b("WebFunnelLogger"))("FBStoriesMTouchTrayProductionFunnelDefinition").markStart().setSessionKey(d.$3).setAction("Production item select").log();b("MStoriesProductionInfo").setUploadStatus(b("MStoriesUploadStatus").IDLE);d.$2.click()};var e=0,f=b("UserAgent").isBrowser("Firefox")&&b("UserAgent").isPlatform("Android");this.$1=c.item;this.$2=c.input;a.$4=this;this.$1.addEventListener("click",this.$5,!0);this.$2&&this.$2.addEventListener("change",function(a){a=a.target.files;var c=null;for(var g=0;g<a.length;g++)if(a[g].type.match(/^image\//)){c=a[g];break}if(c!==null){d.$6();var i=function(a){e=a;if(f)b("promiseDone")(h(b("nullthrows")(c)),function(a){a=a;b("MStoriesProductionInfo").setChosenImage({URI:a,rotate:e});d.$7()});else{a=URL.createObjectURL(b("nullthrows")(c));b("MStoriesProductionInfo").setChosenImage({URI:a,rotate:e});d.$7()}};b("MStoriesUtils").displaysExifRotationCorrectly()?i(0):b("Bootloader").loadModules(["ImageExifRotation"],function(a){a.getRotation(c,i)},"MStoriesCreation")}})}var c=a.prototype;c.$6=function(){b("MStoriesUtils").setExitUri(window.location.href,!0)};c.$7=function(){new(b("WebFunnelLogger"))("FBStoriesMTouchTrayProductionFunnelDefinition").setAction("Opening production preview").setSessionKey(this.$3).log();var a=b("XMStoriesProductionPreviewController").getURIBuilder().setString("session_key",this.$3).getURI();b("MPageController").load(a);this.$3=""};return a}();e.exports=a;a.$4=null}),null);
__d("MStoriesDOMUtils",["Bootloader","DOM"],(function(a,b,c,d,e,f){"use strict";f.find=a;function a(a,c,d){a=b("DOM").scry(a,c,d);if(a.length===0){b("Bootloader").loadModules(["FBLogger"],function(a){a("fbstories").mustfix("Failed to load dom element with tag %s and sigil %s",c,d||"")},"MStoriesDOMUtils");return null}return a[0]}}),null);
__d("MStoriesGating",["MFBStoriesGatingConfig","gkx","qex"],(function(a,b,c,d,e,f){"use strict";f.genShouldShowTextOverlays=a;f.shouldMockLogging=c;f.shouldShowOptimisticPreviews=d;f.shouldShowNTViewerSheet=e;function a(){return b("MFBStoriesGatingConfig").enableTextOverlayProduction}function c(){return b("gkx")("1260876")}function d(){return!1}function e(){return b("qex")._("863251")}}),null);
__d("MStoriesHideHeaderListener",["Bootloader","MArrays","MStoriesUIConstants","Stratcom","URI"],(function(a,b,c,d,e,f){"use strict";var g,h="m:page:render:start";a={_hideHeaderListener:null,setup:function(){var a=this;if(this._hideHeaderListener)return;this._hideHeaderListener=b("Stratcom").listen(h,null,function(c){c=new(g||(g=b("URI")))(c.getData().path);c=c.getPath();b("MArrays").findPrefix(b("MStoriesUIConstants").HIDE_HEADER_URLS,c)&&(b("Bootloader").loadModules(["MStoriesDisplayUtils"],function(a){a.toggleChromeBar(!1)},"MStoriesHideHeaderListener"),b("Stratcom").removeCurrentListener(),a._hideHeaderListener=null)})}};e.exports=a}),null);
__d("MStoriesProductionTrayUtils",["cx","CSS","MFBStoriesGatingConfig","MStoriesDOMUtils","MStoriesProductionInfo","MStoriesUploadStatus"],(function(a,b,c,d,e,f,g){"use strict";var h={getAnimationPog:function(){var a=document.getElementById("m-stories-owner-bucket-pog");return a?a:document.getElementById("m-stories-add-item-pog")},getUploadingClass:function(){var a=b("MFBStoriesGatingConfig").trayType;return a==="nine_by_sixteen"?"loading":"_1zpf"},updateProductionPog:function(){var a=b("MStoriesProductionInfo").getUploadStatus();if(a===b("MStoriesUploadStatus").UPLOADING){var c=h.getAnimationPog(),d=document.getElementById("m-stories-add-item-pog"),e=document.getElementById("m-stories-add-item"),f=document.getElementById("m-stories-owner-bucket-pog"),g=h.getUploadingClass();c&&(b("CSS").addClass(c,g),c.id==="m-stories-owner-bucket-pog"?(d&&b("CSS").removeClass(d,g),e&&b("CSS").addClass(e,"disable")):(f&&b("CSS").removeClass(f,g),e&&b("CSS").removeClass(e,"disable")))}c=b("MFBStoriesGatingConfig").trayType;if(c!=="circular"){d=document.getElementById("m-stories-owner-bucket");if(d){f=d.getAttribute("data-is-optimistic-item")!=null;g=a===b("MStoriesUploadStatus").UPLOADING||a===b("MStoriesUploadStatus").FAILED;f&&(g?b("CSS").removeClass(d,"hidden"):b("CSS").addClass(d,"hidden"))}this._updateProductionItemText()}this._updateErrorState()},_updateProductionItemText:function(){var a=document.getElementById("m-stories-owner-bucket");if(!a)return;var c=b("MStoriesDOMUtils").find(a,"div","m-stories-rectangular-item-title");a=b("MStoriesDOMUtils").find(a,"div","m-stories-rectangular-item-adding-story-title");if(c&&a){var d=b("MStoriesProductionInfo").getUploadStatus();switch(d){case b("MStoriesUploadStatus").UPLOADING:b("CSS").addClass(c,"hidden");b("CSS").removeClass(a,"hidden");break;default:b("CSS").addClass(a,"hidden");b("CSS").removeClass(c,"hidden");break}}},_updateErrorState:function(){var a=b("MStoriesProductionInfo").getUploadStatus(),c=b("MFBStoriesGatingConfig").trayType;switch(c){case"fblite_with_profile_pog":c=document.getElementById("m-stories-owner-bucket");if(c!=null){var d=b("MStoriesDOMUtils").find(c,"div","m-stories-rectangular-item-count");c=b("MStoriesDOMUtils").find(c,"div","m-stories-rectangular-item-count-error");d&&c&&(a===b("MStoriesUploadStatus").FAILED?(b("CSS").addClass(d,"hiddenByError"),b("CSS").removeClass(c,"hidden")):(b("CSS").removeClass(d,"hiddenByError"),b("CSS").addClass(c,"hidden")))}break;case"mobile_three_by_one":d=this.getAnimationPog();a===b("MStoriesUploadStatus").FAILED?b("CSS").addClass(d,"_6y1s"):b("CSS").removeClass(d,"_6y1s");break;case"nine_by_sixteen":c=this.getAnimationPog();d=document.getElementById("m-stories-owner-title");a===b("MStoriesUploadStatus").FAILED?(b("CSS").addClass(c,"error"),d&&b("CSS").addClass(d,"error")):(b("CSS").removeClass(c,"error"),d&&b("CSS").removeClass(d,"error"));break;default:c=this.getAnimationPog();c&&(a===b("MStoriesUploadStatus").FAILED?b("CSS").addClass(c,"_4ts1"):b("CSS").removeClass(c,"_4ts1"));break}}};e.exports=h}),null);
__d("MStoriesTrayInfo",[],(function(a,b,c,d,e,f){"use strict";var g={_hasNextPage:{},_trayBucketIDs:{},_trayTrackingStrings:{},_trayNeedsRefresh:!1,setTrayBucketIDs:function(a){var b=g._getKey(a.key);g._trayBucketIDs[b]=a.bucketIDs;g._hasNextPage[b]=a.hasNextPage;g._trayTrackingStrings[b]=a.trackingStrings},appendTrayBucketIDs:function(a){var b=g._getKey(a.key);g._trayBucketIDs[b]==null&&(g._trayBucketIDs[b]=[]);g._trayBucketIDs[b]=g._trayBucketIDs[b].concat(a.bucketIDs);g._trayTrackingStrings[b]==null&&(g._trayTrackingStrings[b]=[]);g._trayTrackingStrings[b]=g._trayTrackingStrings[b].concat(a.trackingStrings);g._hasNextPage[b]=a.hasNextPage},getTrayBucketIDs:function(a){a=g._getKey(a);return g._trayBucketIDs[a]},getTrayTrackingStrings:function(a){a=g._getKey(a);return g._trayTrackingStrings[a]||[]},getHasNextPage:function(a){a=g._getKey(a);return!!g._hasNextPage[a]},_getKey:function(a){return a==null?"top_of_feed":a},setTrayNeedsRefresh:function(a){g._trayNeedsRefresh=a},getTrayNeedsRefresh:function(){return g._trayNeedsRefresh}};e.exports=g}),null);
__d("MStoriesTrayUIConstants",[],(function(a,b,c,d,e,f){"use strict";a=20;f.REDIRECT_DELAY_IN_MS=a}),null);
__d("MStoriesTrayAsync",["cx","Bootloader","CSS","DOM","MFBStoriesGatingConfig","MFBStoriesOptimisticTrayGatedModule","MPageController","MStoriesDOMUtils","MStoriesGating","MStoriesHideHeaderListener","MStoriesProductionTrayUtils","MStoriesStratcomEvents","MStoriesTrayInfo","MStoriesTrayUIConstants","QuickPerformanceLogger","Run","Stratcom","URI","WebFunnelLogger"],(function(a,b,c,d,e,f,g){var h,i=b("MFBStoriesOptimisticTrayGatedModule").module,j="m:page:render:cache:complete-with-replays";a={_currentItemLoading:null,_listeners:[],_spinner:null,_feedUnitURIs:[],registerFeedUnitWithUri:function(a){this._feedUnitURIs.push(a.uri),this._init()},updateSpinner:function(a){this._spinner=a.spinner,this._init()},_init:function(){var a=this;if(this._listeners.length>0)return;this._listeners=[b("Stratcom").listen(j,null,function(){if(!b("MStoriesTrayInfo").getTrayNeedsRefresh())return;b("Bootloader").loadModules(["MStoriesTrayUtils"],function(b){b.refreshTray(),b.refreshFeedUnitsWithURIs(a._feedUnitURIs)},"MStoriesTrayAsync")}),b("Stratcom").listen("click","m-stories-tray-archive-link",this._openArchive),b("Stratcom").listen("click","m-stories-tray-pog-container",function(b){a._openPOG(b)}),b("Stratcom").listen("keypress","m-stories-tray-pog-container",function(b){var c=b.getSpecialKey();(c==="return"||c==="space")&&(b.prevent(),a._openPOG(b))}),b("Stratcom").listen(b("MStoriesStratcomEvents").UPLOAD_SUCCESS,null,function(a){a=a.getData()||{};i&&i.handleUploadSuccess(a.newThreadID,a.optimisticThreadID)})];b("MStoriesHideHeaderListener").setup();i&&i.initializeOnTrayLoad();b("MStoriesProductionTrayUtils").updateProductionPog();b("Run").onLeave(function(){a._destroy()})},_openArchive:function(a){a=a.getNode("m-stories-tray-archive-link");if(a!=null){var c=a.getAttribute("data-href");c&&window.setTimeout(function(){b("MPageController").load(c,{hideLoadingIndicator:!1})})}},_openPOG:function(a){var c=this,d=a.getNode("m-stories-tray-pog-container");if(this._currentItemLoading){if(this._currentItemLoading===d)return;this._setLoadingStateHidden(this._currentItemLoading,!0)}if(!d)return;d.id==="m-stories-owner-bucket"?b("Bootloader").loadModules(["MStoriesProductionTrayAsync"],function(a){if(!d)return;if(a.handleFailedAddToStoryPogSelected())return;c._openViewer(d)},"MStoriesTrayAsync"):this._openViewer(d)},_setLoadingStateHidden:function(a,c){var d=b("MFBStoriesGatingConfig").trayType,e=c?b("CSS").removeClass:b("CSS").addClass;switch(d){case"circular":e(a,"loading");break;case"fblite_with_profile_pog":e(a,"_6pvo");break;case"nine_by_sixteen":case"mobile_three_by_one":a=b("MStoriesDOMUtils").find(a,"div","m-stories-tray-pog");if(a){if(c&&a.id==="m-stories-owner-bucket-pog")return;d==="nine_by_sixteen"?e(a,"loading"):e(a,"_1zpf")}break}},_openViewer:function(a){this._currentItemLoading=a;var c=b("MFBStoriesGatingConfig").trayType;c=c!=="circular";b("QuickPerformanceLogger").markerEnd(13238313,4);b("QuickPerformanceLogger").markerStart(13238313);if(!c){c=b("MStoriesDOMUtils").find(a,"i","m-stories-tray-pog-picture");c!=null&&b("DOM").insertAfter(c,this._spinner)}var d=a.getAttribute("data-href");b("MStoriesGating").shouldShowOptimisticPreviews()&&a.id==="m-stories-owner-bucket"&&i&&(d=i.getURI(a));if(d){c=new(h||(h=b("URI")))(d);c=c.getQueryData();var e=c.tray_session_id;new(b("WebFunnelLogger"))("FBStoriesMTouchTrayViewerFunnelDefinition").addFunnelPayload("tray_index",c.selected_bucket_index).setSessionKey((c=e)!=null?c:"null").setAction("Tray item select").log();this._setLoadingStateHidden(a,!1);window.setTimeout(function(){b("MPageController").load(d,{hideLoadingIndicator:!0});var a=b("Stratcom").listen("m:page:iui:response:complete",null,function(c){c=c.getData()||{};c=c.path;if(c==null||!c.includes("stories/view_tray"))return;new(b("WebFunnelLogger"))("FBStoriesMTouchTrayViewerFunnelDefinition").setSessionKey((c=e)!=null?c:"null").setAction("Viewer rendered").markEnd().log();a.remove()})},b("MStoriesTrayUIConstants").REDIRECT_DELAY_IN_MS)}},_destroy:function(){var a=b("MStoriesProductionTrayUtils").getAnimationPog();a&&b("CSS").removeClass(a,b("MStoriesProductionTrayUtils").getUploadingClass());this._listeners.forEach(function(a){return a.remove()});this._listeners=[]}};e.exports=a}),null);
__d("MStoriesToast",["cx","fbt","CSS","DOM","FBLogger","Keyframes","MStoriesStratcomEvents","Run","Stratcom","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";var i=1e3,j=500,k=125,l=280;a=function(){function a(){var c=this;this.$2=[];this.$5=function(){c.$1&&(b("DOM").remove(c.$1),c.$1=null),c.$2=[],a.$3=null};b("Run").onLeave(this.$5)}a.getInstance=function(){this.$3||(this.$3=new a());return this.$3};var c=a.prototype;c.showToast=function(a,c,d){var e=this,f=this.$1;f&&(this.$2.forEach(function(a){return window.clearTimeout(a)}),b("DOM").remove(f),this.$1=null);d&&b("Stratcom").invoke(b("MStoriesStratcomEvents").MEDIA_PAUSE_WITH_COVER,null);this.$1=b("DOM").create("div",null,a);f=c===null||c===void 0?i:c;b("Stratcom").invoke(b("MStoriesStratcomEvents").TOAST_SHOWING,null);b("DOM").appendContent(document.body,this.$1);this.$2=[window.setTimeout(function(){e.$1&&b("CSS").addClass(e.$1,"_1ufk")},f),window.setTimeout(function(){e.$1&&b("DOM").remove(e.$1),d&&b("Stratcom").invoke(b("MStoriesStratcomEvents").THREAD_MODAL_HIDE,null),b("Stratcom").invoke(b("MStoriesStratcomEvents").TOAST_HIDING,null),e.$1=null},f+j)]};a.showDefaultToast=function(c,d){c=b("DOM").create("div",{className:"_3fcy"},c);c=b("DOM").create("div",{className:"_30l6 bottom"},c);a.getInstance().showToast(c,d)};a.showReplySentSuccessToast=function(c,d){d===void 0&&(d=!0);var e=null;c?e=b("DOM").create("div",{className:"_30l3"},c):e=b("DOM").create("div",{className:"_30l4"});c=b("DOM").create("div",{className:"_30l5"},h._("\ub2f5\uc7a5 \uc804\uc1a1\ub428"));e=b("DOM").create("div",{className:"_30l6"},[e,c]);a.getInstance().showToast(e,i,d)};a.showReactionSentSuccessToast=function(a,c){var d=b("DOM").create("div",{className:"_6kiw"});b("Stratcom").invoke(b("MStoriesStratcomEvents").MEDIA_PAUSE_WITH_COVER,null);b("Stratcom").invoke(b("MStoriesStratcomEvents").TOAST_SHOWING,null);b("promiseDone")(b("Keyframes").requestRenderer(a,{projectName:"facebook_stories",assetName:c}),function(a){b("DOM").appendContent(document.body,d),b("DOM").appendContent(d,a.getElement()),a.play(),window.setTimeout(function(){b("DOM").remove(d),b("Stratcom").invoke(b("MStoriesStratcomEvents").TOAST_HIDING,null),b("Stratcom").invoke(b("MStoriesStratcomEvents").THREAD_MODAL_HIDE,null)},j)},function(a){b("FBLogger")("fb_stories_web").catching(a).warn("Cannot load mtouch reaction animation")})};a.newShowReactionSentSuccessToast=function(a,c,d){var e=this,f=b("DOM").create("div",{className:"_7g_7"});b("Stratcom").invoke(b("MStoriesStratcomEvents").MEDIA_PAUSE_WITH_COVER,null);b("Stratcom").invoke(b("MStoriesStratcomEvents").TOAST_SHOWING,null);b("promiseDone")(b("Keyframes").requestRenderer(a,{projectName:"facebook_stories",assetName:c}),function(a){b("DOM").appendContent(d,f),b("DOM").appendContent(f,a.getElement()),a.setWidth(k),a.setHeight(l),a.play(),e.$4+=1,a.onRepeatEnd(function(){a.pause(),b("DOM").remove(f),e.$4-=1,e.$4===0&&(b("Stratcom").invoke(b("MStoriesStratcomEvents").TOAST_HIDING,null),b("Stratcom").invoke(b("MStoriesStratcomEvents").THREAD_MODAL_HIDE,null))})},function(a){b("FBLogger")("fb_stories_web").catching(a).warn("Cannot load mtouch reaction animation")})};a.showReplySentFailedToast=function(){var c=b("DOM").create("div",{className:"_30l7"}),d=b("DOM").create("div",{className:"_30l5"},h._("\ubcf4\ub0b4\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4"));c=b("DOM").create("div",{className:"_30l6"},[c,d]);a.getInstance().showToast(c,i)};return a}();e.exports=a;a.$4=0}),null);
__d("MFeedRefresh",["Event","MAnimatedScroll","MHome","MPageController","MViewport","Stratcom","SubscriptionsHandler","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";f.reloadFeed=q;f.reloadFeedIfNeeded=t;f.init=a;var g="/home.php",h=!1,i=!1,j=new(b("SubscriptionsHandler"))(),k=null,l=null,m=0,n=!1,o=500;function p(a){b("MViewport").scrollToTop(),b("MPageController").forceLoad(a)}function q(a){var c=g,d=!1;a&&(a.feedPath!==null&&a.feedPath!==void 0&&(c=a.feedPath),d=!!a.animate);if(d&&a){d=a.animationDuration===null||a.animationDuration===void 0?o:a.animationDuration;b("MAnimatedScroll").scrollToTop({duration:d},function(){p(c)})}else p(c)}function r(){m=0,k&&(b("clearTimeout")(k),k=null)}function s(){r(),i&&(j.release(),j.engage())}function t(a){if(!b("MHome").isHome())return!1;var c=!0;if(a&&m&&l!==null){a=Date.now()-m;c=a>=l}if(!c)return!1;s();q();return!0}function u(){r(),m=Date.now(),k=b("setTimeoutAcrossTransitions")(function(){t(!1)},l)}function v(){var a=t(!0);a||u()}function w(){s();var a=b("MHome").isHome();if(!a)return;u();i&&(j.addSubscriptions(b("Event").listen(document,"touchstart",v,!0)),n&&j.addSubscriptions(b("Event").listen(document,"mousedown",v,!0)))}function x(a,c){c===void 0&&(c=!1);if(a<=0)return;l=a*60*1e3;i=c;b("Stratcom").listen("history:change",null,w);w()}function a(a){if(h)return;x(a.intervalMinutes,a.resetOnTouch);h=!0}}),null);
__d("Time",[],(function(a,b,c,d,e,f){a={getGMTOffset:function(a){var b=new Date(),c=b.getTimezoneOffset()/30;b=b.getTime()/1e3;a=Math.round((a-b)/1800);b=Math.round(c+a)%48;b>24?b-=Math.ceil(b/48)*48:b<-28&&(b+=Math.ceil(b/-48)*48);return b*30}};e.exports=a}),null);
__d("XPageFollowMutatorController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/page/follow_mutator/",{page_id:{type:"Int",required:!0},status:{type:"Bool",defaultValue:!1},location:{type:"Enum",required:!0,enumType:0},privacy_mutation_token:{type:"String"}})}),null);
__d("MFollowSwapButton",["DOM","Event","MRequest","XPageFollowMutatorController"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d,e,f){var g=this;f===void 0&&(f=0);this.$5=0;this.$1=a;this.$2=c;this.$3=d;this.$4=e;this.$5=f;b("Event").listen(a,"click",function(){return g.swap()});b("Event").listen(c,"click",function(){return g.swap()})}var c=a.prototype;c.swap=function(){this.$4=!this.$4;var a=b("XPageFollowMutatorController").getURIBuilder().setInt("page_id",this.$3).setBool("status",this.$4).setEnum("location",this.$5).getURI();a=new(b("MRequest"))(a).setMethod("POST");a.send();this.$4?(b("DOM").insertAfter(this.$1,this.$2),b("DOM").remove(this.$1)):(b("DOM").insertAfter(this.$2,this.$1),b("DOM").remove(this.$2))};return a}();e.exports=a}),null);
__d("TimezoneAutoset",["MRequest","Time"],(function(a,b,c,d,e,f){var g;a=function(a){if(g)return;g=!0;if(!a.time||a.offset===void 0)return;var c=-b("Time").getGMTOffset(a.time);(a.forceUpdate||c!=a.offset)&&new(b("MRequest"))(a.uri).setMethod("POST").setData({offset:c,is_forced:a.forceUpdate}).send()};f.main=a}),null);
__d("MVideoHomeAutoAdvanceManager",["DataStore","MAnimatedScroll","MFullScreen","MViewport","Stratcom","Vector","VideoHomeTypedLogger"],(function(a,b,c,d,e,f){"use strict";var g=70,h=new Map();b("Stratcom").listen("m:video:player:ended",null,function(a){if(b("MFullScreen").isFullScreen())return;a=a.getData().videoElement;a=b("DataStore").get(a,"feedPosition");if(a!=null&&typeof a==="number"){var c=parseInt(a,10)+1;if(h.has(a)&&h.has(c)){var d=h.get(a),e=h.get(c);d instanceof HTMLElement&&e instanceof HTMLElement&&l(d,e,a,c)}}});function i(a){var b="",c="";a.match(/android/i)?b="android":(a.match(/iPhone/)||a.match(/iPod/)||a.match(/iPad/))&&(b="iOS");a.match(/Chrome/)?c="chrome":a.match(/Firefox/)?c="firefox":a.match(/Safari/)?c="safari":a.match(/MSIE|Trident|Edge/)&&(c="edge");return[b,c]}function j(a){a=window.getComputedStyle(a);if(a.display==="none")return"none";else if(a.visibility==="hidden")return"hidden";else return"NA"}function k(a,b){b=b;a=a;var c=0,d=5;while(a instanceof HTMLElement&&b===0&&c<d){var e=window.getComputedStyle(a),f=e.display,g=e.position;e=e.visibility;a.style.position="absolute";a.style.visibility="hidden";a.style.display="block";b=a.offsetHeight;a.style.display=f;a.style.position=g;a.style.visibility=e;a=a.parentElement;c++}return b}function l(a,c,d,e){var f=b("MViewport").getScrollTop(),h=b("Vector").getPos(c),l=h.x;h=h.y-g;var m=navigator.userAgent,n=i(m),o=n[0];n=n[1];var p=c.getBoundingClientRect().top,q=f+p-g,r=null;c.offsetParent===null?r="offset parent is null":r="offset parent is nonnull";var s=j(c),t=j(a),u=a.offsetHeight;u===0&&(u=k(a,u));a=f+u;l="startOffset: "+f+", endOffsetX: "+l+",\n    endOffsetY: "+h+", os: "+o+", browser: "+n+",\n    userAgent: "+m+", distanceFromTop: "+p+",\n    newEndOffset: "+q+", feedPosition: "+d+",\n    nextFeedPosition: "+e+", offsetParentStatus: "+r+",\n    nextVisibleStatus: "+s+", currentVisibleStatus: "+t+",\n    currentUnitHeight: "+u+", heightOffset: "+a;h<=f?a>f?(new(b("VideoHomeTypedLogger"))().setEvent("msite_feed_alternative_height_auto_advance").setEventTargetInfo(l).log(),b("MAnimatedScroll").scrollToOffset(a,{})):q>f?(new(b("VideoHomeTypedLogger"))().setEvent("msite_feed_alternative_rect_auto_advance").setEventTargetInfo(l).log(),b("MAnimatedScroll").scrollToOffset(q,{})):new(b("VideoHomeTypedLogger"))().setEvent("msite_feed_failed_auto_advance").setEventTargetInfo(l).log():(new(b("VideoHomeTypedLogger"))().setEvent("msite_feed_auto_advance").setEventTargetInfo(l).log(),b("MAnimatedScroll").scrollToNode(c,g,{}))}a={registerUnit:function(a,b){h.set(b,a)}};c=a;e.exports=c}),null);
__d("XWebGraphQLMutationController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/webgraphql/mutation/",{query_id:{type:"FBID"},variables:{type:"String"},doc_id:{type:"FBID"}})}),null);
__d("WebGraphQLLegacyHelper",["invariant"],(function(a,b,c,d,e,f,g){"use strict";f.getURI=a;function a(a){var b=a.controller,c=a.docID,d=a.queryID;a=a.variables;c!=d&&(c||d)!=null||g(0,5819,c,d);b=b.getURIBuilder();d?b.setFBID("query_id",d):b.setFBID("doc_id",c);a&&b.setString("variables",JSON.stringify(a));return b.getURI()}}),null);
__d("base62",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function a(a){if(!a)return"0";var b="";while(a>0)b=g[a%62]+b,a=Math.floor(a/62);return b}}),null);
__d("WebGraphQLMutationBase",["invariant","CurrentUser","WebGraphQLLegacyHelper","XWebGraphQLMutationController","base62"],(function(a,b,c,d,e,f,g){"use strict";var h=0;a=function(){function a(a){this.$1=a}var c=a.prototype;c.__getVariables=function(){return this.$1};c.__getDocID=function(){return this.constructor.__getDocID()};a.__getController=function(){return b("XWebGraphQLMutationController")};a.__getDocID=function(){g(0,1804)};a.getURI=function(a){return b("WebGraphQLLegacyHelper").getURI({controller:this.__getController(),docID:this.__getDocID(),variables:{data:babelHelpers["extends"]({client_mutation_id:b("base62")(h++),actor_id:b("CurrentUser").getID()},a)}})};return a}();e.exports=a}),null);